{% extends 'base.html' %}

{% block content %}
  <h2>All Blog Posts</h2>
  {% for post in posts %}
    <div class="post-card">
      <h3>{{ post.title }}</h3>
      <p>{{ post.content[:200] }}{% if post.content|length > 200 %}...{% endif %}</p>
      <a href="{{ url_for('view_post', post_id=post.id) }}">Read More</a>

      {% if session.get('logged_in') and session.get('is_admin') %}
        <div class="admin-actions">
          <a href="{{ url_for('edit_post', post_id=post.id) }}">Edit</a>
          <form action="{{ url_for('delete_post', post_id=post.id) }}" method="POST" style="display:inline;">
            <button type="submit" onclick="return confirm('Are you sure?')">Delete</button>
          </form>
        </div>
      {% endif %}
    </div>
  {% endfor %}
{% endblock %}
